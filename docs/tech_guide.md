# Техническое руководство

## 1) Архитектура
Слои:
- UI (PySide6)
- Application (use-cases/сервисы)
- Domain (правила/константы)
- Infrastructure (БД/репозитории/импорт-экспорт)

## 2) База данных и миграции
- SQLite по умолчанию.
- Инициализация при первом запуске выполняет `Base.metadata.create_all` при отсутствии таблицы `users`.
- Для полного соответствия схеме рекомендуется: `alembic upgrade head`.

Риск: если база создавалась без миграций, таблицы всё равно появятся, но история миграций не зафиксирована.

## 3) Конфигурация
- `app/config.py` задает пути и параметры (platformdirs).
- Логи пишутся в `app.log`.

## 4) Важные сервисы
- `EmzService` — ЭМЗ (версии, диагнозы, интервенции, антибиотики)
- `LabService` — лабораторные пробы
- `SanitaryService` — санитарные пробы
- `AnalyticsService` — поиск/агрегаты/графики

## 5) Категории военнослужащих
Единый список в `app/domain/constants.py`:
- Солдат
- Сержант
- Прапорщик
- Офицер

Используется в ЭМЗ и аналитике.

## 6) Тесты
- `python -m pytest`
- Интеграционные тесты используют SQLite.
